!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=20)}([function(e,t,n){"use strict";n.r(t),function(e){var i=n(2);n.d(t,"destroy",function(){return i.a});var r=n(3);n.d(t,"render",function(){return r.a});var o=n(4);n.d(t,"setup",function(){return o.a});var a=n(5);n.d(t,"start",function(){return a.a});var s=n(6);n.d(t,"update",function(){return s.a}),void 0!==e.hot&&e.hot.accept(["./destroy.js","./render.js","./setup.js","./start.js","./update.js"])}.call(this,n(1)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){"use strict";function i(){console.log("destroy loading scene"),console.log("-------"),delete this.state.redirect}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";function i(){this.context.fillStyle="#181a1f",this.context.fillRect(0,0,this.size.width,this.size.height),this.context.font="16px Courier New",this.context.textAlign="start",this.context.textBaseline="top",this.context.fillStyle="#6b717d",this.context.fillText("/ Theatre",8,8),this.context.fillStyle="#d7dae0",this.context.fillText("$ preloading assets...",8,32),!1===this.preloading&&(this.context.fillText("$ preloading completed",8,56),this.context.fillText("$ loading demo scene...",8,80))}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";function i(){console.log("setup loading scene")}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";function i(){console.log("start loading scene"),this.state.redirect=!1}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";function i(){var e=this;!1===this.preloading&&!1===this.state.redirect&&(setTimeout(function(){e.load("demo")},1e3),this.state.redirect=!0)}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";n.r(t),function(e){var i=n(8);n.d(t,"destroy",function(){return i.a});var r=n(12);n.d(t,"render",function(){return r.a});var o=n(10);n.d(t,"setup",function(){return o.a});var a=n(9);n.d(t,"start",function(){return a.a});var s=n(11);n.d(t,"update",function(){return s.a}),void 0!==e.hot&&e.hot.accept(["./destroy.js","./render.js","./setup.js","./start.js","./update.js"])}.call(this,n(1)(e))},function(e,t,n){"use strict";function i(){console.log("destroy demo scene"),console.log("-------"),delete this.camera,delete this.grid,delete this.world}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";function i(e){return"number"==typeof e&&e%1==0&&e>0?Math.floor(e*Math.random()):Array.isArray(e)&&e.length>0?e[Math.floor(e.length*Math.random())]:null}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e,t){this.components={},this.name=e,this.add=function(e){var t=this;!1===Array.isArray(e)&&(e=[e]),e.forEach(function(e){t.components[e.name]=e})},this.get=function(e){return this.components[e]},this.has=function(e){!1===Array.isArray(e)&&(e=[e]);for(var t=0,n=e.length;t<n;t+=1){var i=e[t],r=i.replace("not:",""),o=i!==r;if(this.components.hasOwnProperty(r)===o)return!1}return!0},this.remove=function(e){!1===Array.isArray(e)&&(e=[e]);for(var t=0,n=e.length;t<n;t+=1){var i=e[t];!0===this.components.hasOwnProperty(i)&&delete this.components[i]}},this.add(t)}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.name="camera",this.camera=e,this.opacity=t}function s(e){this.name="images",this.parts=e,this.parts.forEach(function(e){var t=e.destination,n=e.frame,i=e.framerate,r=e.frames,o=e.opacity,a=e.source;e.source=a,e.frames=r||[[0,0,32,32]],e.frame=n||0,e.framerate=i||8,e.destination=t||[0,0,0,32,32],e.opacity=o||1,e.elapsed=0})}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.name="position",this.x=e,this.y=t,this.z=n}function u(e){this.name="awareness",this.states=e}function d(e,t){var n=this;return new o("tree-"+e+"-"+t,[new a(this.camera),new s([{source:this.assets.images.demo.tree(),frames:[[0,0,32,32]],frame:0,destination:[0,0,0,64,64]}]),new c(64*e,64*t,0),new u({fire:{duration:4e3,elapsed:0,callback:function(e){var t=e.get("position").x/64,i=e.get("position").y/64,r=m.call(n,t,i);n.world.add(r),n.grid[t+10*i]=r,n.world.remove(e)}}})])}function l(e,t){var n=this;return new o("grass-"+e+"-"+t,[new a(this.camera),new s([{source:this.assets.images.demo.grass(),frames:[[0,0,32,32]],frame:0,destination:[0,0,0,64,64]}]),new c(64*e,64*t,0),new u({fire:{duration:2e3,elapsed:0,callback:function(e){var t=e.get("position").x/64,i=e.get("position").y/64,r=m.call(n,t,i);n.world.add(r),n.grid[t+10*i]=r,n.world.remove(e)}},water:{duration:1e4,elapsed:0,callback:function(e){var t=e.get("position").x/64,i=e.get("position").y/64,r=d.call(n,t,i);n.world.add(r),n.grid[t+10*i]=r,n.world.remove(e)}}})])}function h(e){this.name="generate",this.states=e}function f(e,t){var n=this;return new o("snow-"+e+"-"+t,[new a(this.camera),new s([{source:this.assets.images.demo.snow(),frames:[[0,0,32,32]],frame:0,destination:[0,0,0,64,64]}]),new c(64*e,64*t,0),new u({fire:{duration:1e3,elapsed:0,callback:function(e){var t=e.get("position").x/64,i=e.get("position").y/64,r=A.call(n,t,i);n.world.add(r),n.grid[t+10*i]=r,n.world.remove(e)}}}),new h(["ice"])])}function A(e,t){var n=this;return new o("lake-"+e+"-"+t,[new a(this.camera),new s([{source:this.assets.images.demo.lake(),frames:[[0,0,32,32]],frame:0,destination:[0,0,0,64,64]}]),new c(64*e,64*t,0),new u({fire:{duration:4e3,elapsed:0,callback:function(e){var t=e.get("position").x/64,i=e.get("position").y/64,r=l.call(n,t,i);n.world.add(r),n.grid[t+10*i]=r,n.world.remove(e)}},ice:{duration:1e4,elapsed:0,callback:function(e){var t=e.get("position").x/64,i=e.get("position").y/64,r=f.call(n,t,i);n.world.add(r),n.grid[t+10*i]=r,n.world.remove(e)}}}),new h(["water"])])}function g(e,t){return new o("stone-"+e+"-"+t,[new a(this.camera),new s([{source:this.assets.images.demo.stone(),frames:[[0,0,32,32]],frame:0,destination:[0,0,0,64,64]}]),new c(64*e,64*t,0)])}function p(e,t){var n=this;return new o("lava-"+e+"-"+t,[new a(this.camera),new s([{source:this.assets.images.demo.lava(),frames:[[0,0,32,32]],frame:0,destination:[0,0,0,64,64]}]),new c(64*e,64*t,0),new u({water:{duration:3e3,elapsed:0,callback:function(e){var t=e.get("position").x/64,i=e.get("position").y/64,r=g.call(n,t,i);n.world.add(r),n.grid[t+10*i]=r,n.world.remove(e)}},ice:{duration:2e3,elapsed:0,callback:function(e){var t=e.get("position").x/64,i=e.get("position").y/64,r=g.call(n,t,i);n.world.add(r),n.grid[t+10*i]=r,n.world.remove(e)}}}),new h(["fire"])])}function m(e,t){var n=this;return new o("dust-"+e+"-"+t,[new a(this.camera),new s([{source:this.assets.images.demo.dust(),frames:[[0,0,32,32]],frame:0,destination:[0,0,0,64,64]}]),new c(64*e,64*t,0),new u({fire:{duration:4e3,elapsed:0,callback:function(e){var t=e.get("position").x/64,i=e.get("position").y/64,r=p.call(n,t,i);n.world.add(r),n.grid[t+10*i]=r,n.world.remove(e)}},water:{duration:6e3,elapsed:0,callback:function(e){var t=e.get("position").x/64,i=e.get("position").y/64,r=A.call(n,t,i);n.world.add(r),n.grid[t+10*i]=r,n.world.remove(e)}}})])}function w(){console.log("start demo scene"),this.world=new function(e){this.entities={},this.add=function(e){var t=this;!1===Array.isArray(e)&&(e=[e]),e.forEach(function(e){t.entities[e.name]=e})},this.get=function(e){return this.entities[e]},this.remove=function(e){!1===Array.isArray(e)&&(e=[e]);for(var t=0,n=e.length;t<n;t+=1){var i=e[t],r=i.name||i;!0===this.entities.hasOwnProperty(r)&&delete this.entities[r]}},this.system=function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.entities,o={};Object.entries(i).forEach(function(e){var n=r(e,2),i=n[0],a=n[1];!0===a.has(t)&&(o[i]=a)}),n.call(e,o)}}(this),this.grid=new Array(90);for(var e=[m,m,m,l,l,l,A,A,p,f,g,d],t=0;t<9;t+=1)for(var n=0;n<10;n+=1){var o=i(e).call(this,n,t);this.world.add(o),this.grid[n+10*t]=o}}n.d(t,"a",function(){return w})},function(e,t,n){"use strict";function i(e){return function(t){return Math.pow(t,e)}}function r(e){return function(t){return 1-i(e)(1-t)}}function o(){console.log("setup demo scene"),this.camera=new function(e,t,n){var i=[],o={current:!1,duration:0,easing:null,elapsed:0,force:{x:0,y:0},shift:{x:0,y:0}};this.position={x:0,y:0},this.size={width:t,height:n},this.add=function(e){for(var t=0,n=i.length-1;n>=0;n-=1){var r=i[n];if(e.destination.z>=r.destination.z){t=n+1;break}}i.splice(t,0,e)},this.idle=function(){o={current:!1,duration:0,easing:null,elapsed:0,force:{x:0,y:0},shift:{x:0,y:0}}},this.render=function(){var t=this;i.forEach(function(n){var i=n.destination,r=n.frame,a=n.opacity,s=n.source;if(a>0&&!0===t.visible(i.x,i.y,r.width,r.height)){var c=e.globalAlpha;e.globalAlpha=a,e.drawImage(s,r.x,r.y,r.width,r.height,i.x-(t.position.x+o.shift.x),i.y-(t.position.y+o.shift.y),i.width,i.height),e.globalAlpha=c}}),i=[]},this.set=function(e,t){this.position.x=e,this.position.y=t},this.shake=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return function(t){return e(1-t)}}(r(2));this.idle(),o.force={x:e,y:t},o.current=!0,o.duration=n,o.easing=i},this.update=function(e){if(!1!==o.current)if(o.elapsed+e>=o.duration)this.idle();else{o.elapsed+=e;var t=o.easing(o.elapsed/o.duration),n=2*Math.random()*Math.PI;o.shift.x=Math.round(Math.cos(n)*o.force.x*t),o.shift.y=Math.round(Math.sin(n)*o.force.y*t)}},this.visible=function(e,t,n,i){var r=this.position.x+o.shift.x,a=this.position.y+o.shift.y,s=this.size.width,c=this.size.height;return!(e+n<=r||e>=r+s||t+i<=a||t>=a+c)}}(this.context,this.size.width,this.size.height)}n.d(t,"a",function(){return o})},function(e,t,n){"use strict";function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function r(e){var t=this;Object.entries(e).forEach(function(e){var n=i(e,2),r=(n[0],n[1]),o=(r.get("position").x,r.get("position").y,r.get("awareness").states);Object.keys(o).forEach(function(e){var n=o[e];n.modified&&n.modified>0&&(n.elapsed+=t.delta.update*(1+2*(n.modified-1)/10),delete n.modified),n.elapsed>=n.duration&&n.callback(r)})})}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(e){var t=this;Object.entries(e).forEach(function(e){var n=o(e,2),i=(n[0],n[1]),r=i.get("position").x/64,a=i.get("position").y/64,s=t.grid[r+10*(a-1)],c=t.grid[r+1+10*(a-1)],u=t.grid[r+1+10*a],d=t.grid[r+1+10*(a+1)],l=t.grid[r+10*(a+1)],h=t.grid[r-1+10*(a+1)],f=t.grid[r-1+10*a],A=t.grid[r-1+10*(a-1)],g=[];a>0&&g.push(s),a>0&&(r+1)%10!=0&&g.push(c),(r+1)%10!=0&&g.push(u),a<9&&(r+1)%10!=0&&g.push(d),a<9&&g.push(l),a<9&&r%10!=0&&g.push(h),r%10!=0&&g.push(f),a>0&&r%10!=0&&g.push(A);var p=i.get("awareness").states;Object.keys(p).forEach(function(e){var t=e,n=p[e];g.forEach(function(e){void 0!==e&&!0===e.has("generate")&&-1!==e.get("generate").states.indexOf(t)&&(n.modified=n.modified?n.modified+=1:1)})})})}function s(){this.camera.update(this.delta.update),this.world.system(["awareness"],a),this.world.system(["awareness"],r)}n.d(t,"a",function(){return s})},function(e,t,n){"use strict";function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function r(e){var t=this;Object.entries(e).forEach(function(e){var n=i(e,2),r=(n[0],n[1]),o=r.get("camera"),a=r.get("images"),s=r.get("position");a.parts.forEach(function(e){var n=e.destination,i=e.frame,r=e.framerate,a=e.frames,c=e.opacity,u=e.source;if(a.length>1){e.elapsed+=t.delta.render;for(var d=1e3/r;e.elapsed>=d;)e.elapsed-=d,e.frame=i===a.length-1?0:i+1}o.camera.add({source:u,frame:{x:a[e.frame][2]*a[e.frame][0],y:a[e.frame][3]*a[e.frame][1],width:a[e.frame][2],height:a[e.frame][3]},destination:{x:s.x+n[0],y:s.y+n[1],z:s.z+n[2],width:n[3],height:n[4]},opacity:o.opacity*c})})})}function o(){this.context.fillStyle="#d7dae0",this.context.fillRect(0,0,this.size.width,this.size.height),this.world.system(["images","position"],r),this.camera.render()}n.d(t,"a",function(){return o})},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAA3ElEQVRYhe1WQRKDIAzcOp74Aw/g2GM/5Jd9gH/w2p5kSiSWSAh2xj05o7IbyG54TK/nGx0x9CS/BQDAyL0I3sXneVntBHwTW2AnQKParYiStdgjkJJRlBZSLWAjklStKoAKkeK6NgT251vboDlrH+4AJayxKPfvzx7QCiFune49cAtQywHg3ABrFsXBO5tZUBvFsQdqx/C8rKcsOwTvIrn1XQAAxpa3nRL8hw21h5JYAO30EuS+zQkX2VBSeak9VZPwSAiHREDLs+aQuICGiUUuZHfAMhsSAT1C6QOyXl0Fu9DzGAAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAvElEQVRYhdWWwQ2AIAxFlTXcwSk4uZxHl3EKd3AOPWlM1PYX2gL/ZtLER/9voZ+X6egKKjw/1m0vCxDHwR0i8CU6+jvYC0DSBUldHAcM4IJAhNZRIi3QygMFSgJonJCTWwjdAVD7sgCon6D2tWGB5XaEACxXdJYF5otIQ1znYACrpWTeAS4/LmMovgs8HyVtLCJEqV2rswMe7wASIEWp0HVawEkSOHgVW80+Z80NILlyNUNaVwY8x+8ToIROUco7r9vWWcgAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAn0lEQVRYhe2WwQ2AIAxFv8aDU7iBUzmWY7EBU3DDkwQVWm2KXNobAfpfQ/kwbHuM6BhjT3EDMAAAmLgFwfnLeF6X9gC56F3wnNMCKQJQySXCFDR7BBpBQXdvQgMwAAP47AOUSzYBkL4Fb/exANIqS29IKddvPVArpHsTGoABpGsoMRgNU0oAkgT5nto950LtCDjx4PzDHYGf/oSAGVE9DhPHLOg8NmucAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABf0lEQVRYhcVXO46DMBB9IKqImiNE6WkjUaXgImyd4ywXoeYAnCE9NUrLFmisidfjD4b4SUi2mZk32PPB2et5XRGJaSxRNwsAoBsq9O3s1CG5nCb06Ib5mB5JhhuX3vN5N1TIXs/rSgq65ybjANTX6jK0LumZ9AsaEDnfTgkSgYuYy9XNgmkstx0INXAkilTEwHYUeRJmhqQOTGO5OWAKurpZ8Pu+eBkiWVfwmvRyPpGEfOBTfEx2lQOmQAwxaipSLnkAyB63+9q3c5JM+EoW1M0ixlg3VN/JAr3HcKhmFBrBITDFEh158e/NwbDFlmrHexGzayoN+3aGlAU+BWZPAeJwFiIX9qawqgOudkx9+yxYK6Ft/VAHUlVB5cDZRLZGl7uEYskBeyU8tRDR0f5c3m4HYn+vQ+KI60XFgOkyE4qPIwiNA9pan6+XdjXT74bSLcmXyOWAjoKTxhjWnZPWda7scbtbb8f8ymYy7LonSsQEaxpK5HzMDVNM+JL37Yw/hH7drl0juI4AAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABDElEQVRYhb1X0RXCMAikqaN0hO6/gNnAjmKffuGLEUI4qPdrgMuFg7rcH88Xgdi3lepxouFERFQixTNiC5oMvXlfq2g/XElCJJCRrIV2oXqcX7WKVpwTeJXZt9XVnGoT1uNUE41I8flZ4otlwxGJ1B7QMCqCNK7qAk9yvr1XASnnUAEpIEt6xs0bECkuxYoKtBJHRu4MTBfMgEki6sDLqEXkWVIIRBrTtQ15zPawZsUo/2cXWCRQ71vnpxXI3paMFBdEkNKElxDIWDQQAe8HRQtkcoaeQCs24ygG1ISR0durCykQtWSrgHsdR9GTh3sgazD9ZQ6Yu0A6nPEhMmPpHwKj/wNXQHyCzOJWrjceApPzijaCtwAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABkElEQVRYhcWVq27DQBBFb61EMo9UYsncxNDBkUzcnyvsp5REMo5hSFFIpPxAUCWDFlRe7WNmdtZu4su8j7nHM7O7L+8fbz9YUdma5gCw0Swa+jwYaw7fjwegjGNzqWAkgGQck71XA+P0wNDni8wlGBXAIxSDeMopkCBWP4ZPA+Cy8O8Ap+GK03BVrxcBNIFswxRjFYAflDLYN2UwN43Z4u4EVQliaaUMfXE9oHoLNEYaCBGAIpwblNPQ50EpnBLEmsifT+14SkkloCCWKgPc9EtdT5VkaZlMBiazfVPO7ng7BjcHlE4fJN0DWlG9wmkDAPfdBcDWDPqXi6YUKaa2xAxw6Z5rRsn0QNWN+PrcBgu4noiZ2vB+YzeHV/OdAUBbFwbCf1xi6U89BVU3Ot/BPcBlYompJNMDbV2YTEhGS+rt/70DQC3kzCSIqhsdo2ntNOb/ZFCCti5wPN9w311QdbSJXSIO5u9ow4nhm5MANgS18Xi+oepG3BEacLGmfZTEx4gilgJS62NzLIAUTDOv1S8tGsrUuhRuKQAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABhUlEQVRYhcWXr27DMBDG3WlsICoYmCJNQWXLG5QFVX2Dqs80uAeI8gaBZXmDwqCRooBoZNJQh2xdLr4/XuzsY1Fd3++++O6czfvH4W4I1c1ozqct9XMUPcCHy/WWNJgIUJX5DKJuxvUAUopydwZgXYCZUy7Uzahy6HK9marMdQAWQqsiG9Rr1QAa2cw/v57FtVxCLECRDS5DbDUszyUHVXRAk+ESCC8AtJd6x1JAbU8JciAkS+1B3nCtuGt7B0C98yIbJpChrftRWlBkg/l5fTLGpJkJqjKELTp2a2YB9sed2R93QRuGAiafBbAafHBqgKrM3Qa2NPEB5AJRUgPATWFQaRbgEY/hVABSRrb0qBIMngW4i51P28nm+LlrexGCSiLoEOLA3DouOHyOVgVU78ddE+tPAF3bm67tg//nmyuLb0ScfNd67AI7jGIJ9g/cN5J3QhscOgFdEKehT9wtF+vl7dtUZe7OjA1ugZwDqb6KJNDJGQjJLJZW+zJSAayd/QzgP/QLW923dXWB0tEAAAAASUVORK5CYII="},function(e,t,n){"use strict";n.r(t);var i={};n.r(i),n.d(i,"loading",function(){return s}),n.d(i,"demo",function(){return c});var r=[{name:"dust",scope:"demo",source:n(13),type:"image"},{name:"grass",scope:"demo",source:n(14),type:"image"},{name:"lake",scope:"demo",source:n(15),type:"image"},{name:"lava",scope:"demo",source:n(16),type:"image"},{name:"snow",scope:"demo",source:n(17),type:"image"},{name:"stone",scope:"demo",source:n(18),type:"image"},{name:"tree",scope:"demo",source:n(19),type:"image"}];function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var a=[].concat(o([]),o(r),o([])),s=n(0),c=n(7);new function(e){var t=e.assets,n=e.container,i=e.scenes,r=e.size,o=e.expose||!1,a=e.framerate||60,s=e.sharp||!1,c=e.speed||1,u=null,d=!1;this.preloading=!1,this.scenes=i,this.size=r,this.state={},this.version="0.32.0",this.load=function(e){u=e},this.restart=function(){d=!0},function(){var e=this,i=new function(e,t,n,i){var r=document.createElement("canvas"),o=r.getContext(e),a=window.devicePixelRatio||1;r.setAttribute("id",t),r.setAttribute("height",a*i),r.setAttribute("width",a*n),r.style.height=i+"px",r.style.width=n+"px",o.scale(a,a),this.context=o,this.element=r,this.sharp=function(){this.element.style.imageRendering="-moz-crisp-edges",this.element.style.imageRendering="-webkit-crisp-edges",this.element.style.imageRendering="crisp-edges",this.element.style.imageRendering="pixelated",this.context.imageSmoothingEnabled=!1}}("2d","theatre",this.size.width,this.size.height);!0===s&&i.sharp(),n.appendChild(i.element),this.container=n,this.context=i.context,this.element=i.element,this.assets={},this.delta={},this.delta.render=0,this.delta.update=0,this.scene=this.scenes.loading,this.scene.setup.call(this),this.scene.start.call(this);var r=new function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,i=null,r=null;this.framerate=e,this.speed=t,this.render=function(e){var t=Date.now();null!==i&&e(t-i),requestAnimationFrame(this.render.bind(this,e)),i=t},this.update=function(e){var t=Date.now();for(null!==r&&(n+=t-r);n>=1e3/this.framerate/this.speed;)n-=1e3/this.framerate/this.speed,e(1e3/this.framerate);r=t,setTimeout(this.update.bind(this,e),1e3/Math.max(this.framerate,60))}}(a,c);r.update(function(t){return e.delta.update=t,e.scene.update.call(e),!0===d?(e.scene.start.call(e),void(d=!1)):null!==u?(e.scene.destroy.call(e),e.scene=e.scenes[u],e.scene.setup.call(e),e.scene.start.call(e),void(u=null)):void 0}),r.render(function(t){e.delta.render=t,e.scene.render.call(e)}),function(e,t){var n=[];e.forEach(function(e){var t=new Promise(function(t,n){if("dataset"===e.type&&(e.getter=function(){return e.source},t(e)),"image"===e.type){var i=new Image;i.src=e.source,i.onload=function(){e.getter=function(){return i},t(e)}}else if("sound"===e.type){var r=new Audio(e.source);r.oncanplaythrough=function(){e.getter=function(){return r.cloneNode()},t(e)}}});n.push(t)}),Promise.all(n).then(t)}(t,function(t){t.forEach(function(t){void 0===e.assets[t.type+"s"]&&(e.assets[t.type+"s"]={}),void 0===e.assets[t.type+"s"][t.scope]&&(e.assets[t.type+"s"][t.scope]={}),e.assets[t.type+"s"][t.scope][t.name]=t.getter}),e.preloading=!1}),this.loop=r,this.preloading=!0}.call(this,e),!0===o&&(window.theatre=this)}({assets:a,container:document.body,expose:!0,scenes:i,sharp:!0,size:{width:640,height:576}})}]);
//# sourceMappingURL=index.js.map