{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./sources/game/scenes/loading/index.js","webpack:///(webpack)/buildin/harmony-module.js","webpack:///./sources/game/scenes/loading/destroy.js","webpack:///./sources/game/scenes/loading/render.js","webpack:///./sources/game/scenes/loading/setup.js","webpack:///./sources/game/scenes/loading/start.js","webpack:///./sources/game/scenes/loading/update.js","webpack:///./sources/game/scenes/demo/index.js","webpack:///./sources/game/scenes/demo/destroy.js","webpack:///./sources/theatre/modules/random.js","webpack:///./sources/theatre/modules/world.js","webpack:///./sources/game/components/common/camera.js","webpack:///./sources/game/components/common/images.js","webpack:///./sources/game/components/common/position.js","webpack:///./sources/game/components/demo/awareness.js","webpack:///./sources/game/entities/demo/tree.js","webpack:///./sources/game/entities/demo/grass.js","webpack:///./sources/game/components/demo/generate.js","webpack:///./sources/game/entities/demo/snow.js","webpack:///./sources/game/entities/demo/lake.js","webpack:///./sources/game/entities/demo/stone.js","webpack:///./sources/game/entities/demo/lava.js","webpack:///./sources/game/entities/demo/dust.js","webpack:///./sources/game/scenes/demo/start.js","webpack:///./sources/theatre/modules/ease.js","webpack:///./sources/game/scenes/demo/setup.js","webpack:///./sources/theatre/modules/camera.js","webpack:///./sources/game/systems/demo/recovery.js","webpack:///./sources/game/systems/demo/state.js","webpack:///./sources/game/scenes/demo/update.js","webpack:///./sources/game/systems/common/images.js","webpack:///./sources/game/scenes/demo/render.js","webpack:///./sources/game/assets/images/demo/dust-32x32.png","webpack:///./sources/game/assets/images/demo/grass-32x32.png","webpack:///./sources/game/assets/images/demo/lake-32x32.png","webpack:///./sources/game/assets/images/demo/lava-32x32.png","webpack:///./sources/game/assets/images/demo/snow-32x32.png","webpack:///./sources/game/assets/images/demo/stone-32x32.png","webpack:///./sources/game/assets/images/demo/tree-32x32.png","webpack:///./sources/game/assets/datasets/index.js","webpack:///./sources/game/assets/images/index.js","webpack:///./sources/game/assets/index.js","webpack:///./sources/index.js","webpack:///./sources/theatre/core/theatre.js","webpack:///./sources/theatre/core/canvas.js","webpack:///./sources/theatre/core/loop.js","webpack:///./sources/theatre/core/preload.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","_destroy_js__WEBPACK_IMPORTED_MODULE_0__","_render_js__WEBPACK_IMPORTED_MODULE_1__","_setup_js__WEBPACK_IMPORTED_MODULE_2__","_start_js__WEBPACK_IMPORTED_MODULE_3__","_update_js__WEBPACK_IMPORTED_MODULE_4__","hot","accept","originalModule","webpackPolyfill","children","destroy","console","log","this","state","redirect","render","context","fillStyle","fillRect","size","width","height","font","textAlign","textBaseline","fillText","preloading","setup","start","update","_this","setTimeout","load","camera","grid","world","random","items","Math","floor","Array","isArray","length","Entity","components","add","forEach","component","has","iterator","search","replace","exclude","remove","Camera","opacity","arguments","undefined","Images","parts","image","destination","frame","framerate","frames","source","elapsed","Position","x","y","z","Awareness","states","tree","assets","images","demo","fire","duration","callback","entity","a","dust","grass","water","Generate","snow","lake","ice","stone","lava","entities","_this2","system","handler","chosen","entries","_ref","_ref2","_slicedToArray","line","column","easeIn","power","pow","easeOut","shaking","current","easing","force","shift","position","target","splice","idle","visible","alpha","globalAlpha","drawImage","set","shake","reverse","delta","amplitude","angle","PI","round","cos","sin","recovery","awareness","keys","data","modified","state_slicedToArray","top","topright","right","rightbottom","bottom","bottomleft","left","lefttop","neighbors","push","neighbor","indexOf","images_images","cameraComponent","imagesComponent","positionComponent","scope","type","assets_assets","concat","_toConsumableArray","config","container","scenes","expose","sharp","speed","loading","restarting","version","scene","restart","canvas","identifier","element","document","createElement","getContext","ratio","window","devicePixelRatio","setAttribute","style","scale","imageRendering","imageSmoothingEnabled","appendChild","loop","elapsedTime","lastRender","lastUpdate","currentRender","Date","now","requestAnimationFrame","currentUpdate","max","timeframe","promises","asset","promise","Promise","resolve","reject","Image","src","onload","sound","Audio","oncanplaythrough","cloneNode","all","then","preload","theatre","body","scenes_namespaceObject"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 20);\n","import {destroy} from './destroy.js';\nimport {render} from './render.js';\nimport {setup} from './setup.js';\nimport {start} from './start.js';\nimport {update} from './update.js';\n\nif (typeof module.hot !== 'undefined') {\n\n    module.hot.accept([\n\n        './destroy.js',\n        './render.js',\n        './setup.js',\n        './start.js',\n        './update.js'\n    ]);\n}\n\nexport {destroy, render, setup, start, update};\n","module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","function destroy() {\n\n    console.log('destroy loading scene');\n    console.log('-------');\n\n    delete this.state.redirect;\n}\n\nexport {destroy};\n","function render() {\n\n    // console.log('render loading scene');\n\n    this.context.fillStyle = '#181a1f';\n    this.context.fillRect(0, 0, this.size.width, this.size.height);\n\n    this.context.font = '16px Courier New';\n    this.context.textAlign = 'start';\n    this.context.textBaseline = 'top';\n    this.context.fillStyle = '#6b717d';\n    this.context.fillText('/ Theatre', 8, 8);\n    this.context.fillStyle = '#d7dae0';\n\n    this.context.fillText('$ preloading assets...', 8, 32);\n\n    if (this.preloading === false) {\n\n        this.context.fillText('$ preloading completed', 8, 32 + 24);\n        this.context.fillText('$ loading demo scene...', 8, 32 + 24 + 24);\n    }\n}\n\nexport {render};\n","function setup() {\n\n    console.log('setup loading scene');\n}\n\nexport {setup};\n","function start() {\n\n    console.log('start loading scene');\n\n    this.state.redirect = false;\n}\n\nexport {start};\n","function update() {\n\n    // console.log('update loading scene');\n\n    if (this.preloading === false && this.state.redirect === false) {\n\n        setTimeout(() => {\n\n            this.load('demo');\n\n        }, 1000);\n\n        this.state.redirect = true;\n    }\n}\n\nexport {update};\n","import {destroy} from './destroy.js';\nimport {render} from './render.js';\nimport {setup} from './setup.js';\nimport {start} from './start.js';\nimport {update} from './update.js';\n\nif (typeof module.hot !== 'undefined') {\n\n    module.hot.accept([\n\n        './destroy.js',\n        './render.js',\n        './setup.js',\n        './start.js',\n        './update.js'\n    ]);\n}\n\nexport {destroy, render, setup, start, update};\n","function destroy() {\n\n    console.log('destroy demo scene');\n    console.log('-------');\n\n    delete this.camera;\n    delete this.grid;\n    delete this.world;\n}\n\nexport {destroy};\n","function random(items) {\n\n    if (typeof items === 'number'\n    && items % 1 === 0\n    && items > 0) {\n\n        return Math.floor(items * Math.random());\n    }\n\n    if (Array.isArray(items)\n    && items.length > 0) {\n\n        return items[Math.floor(items.length * Math.random())];\n    }\n\n    return null;\n}\n\n// exports current module as a function\nexport {random};\n","function Entity(name, components) {\n\n    function add(components) {\n\n        if (Array.isArray(components) === false) {\n\n            components = [components];\n        }\n\n        components.forEach((component) => {\n\n            this.components[component.name] = component;\n        });\n    }\n\n    function get(component) {\n\n        return this.components[component];\n    }\n\n    function has(components) {\n\n        if (Array.isArray(components) === false) {\n\n            components = [components];\n        }\n\n        for (let iterator = 0, length = components.length; iterator < length; iterator += 1) {\n\n            const search = components[iterator];\n            const component = search.replace('not:', '');\n            const exclude = search !== component;\n\n            if (this.components.hasOwnProperty(component) === exclude) {\n\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    function remove(components) {\n\n        if (Array.isArray(components) === false) {\n\n            components = [components];\n        }\n\n        for (let iterator = 0, length = components.length; iterator < length; iterator += 1) {\n\n            const component = components[iterator];\n\n            if (this.components.hasOwnProperty(component) === true) {\n\n                delete this.components[component];\n            }\n        }\n    }\n\n    this.components = {};\n    this.name = name;\n\n    this.add = add;\n    this.get = get;\n    this.has = has;\n    this.remove = remove;\n\n    this.add(components);\n}\n\nfunction World(context) {\n\n    function add(entities) {\n\n        if (Array.isArray(entities) === false) {\n\n            entities = [entities];\n        }\n\n        entities.forEach((entity) => {\n\n            this.entities[entity.name] = entity;\n        });\n    }\n\n    function get(entity) {\n\n        return this.entities[entity];\n    }\n\n    function remove(entities) {\n\n        if (Array.isArray(entities) === false) {\n\n            entities = [entities];\n        }\n\n        for (let iterator = 0, length = entities.length; iterator < length; iterator += 1) {\n\n            const entity = entities[iterator];\n            const key = entity.name || entity;\n\n            if (this.entities.hasOwnProperty(key) === true) {\n\n                delete this.entities[key];\n            }\n        }\n    }\n\n    function system(components, handler, entities = this.entities) {\n\n        const chosen = {};\n\n        Object.entries(entities).forEach(([name, entity]) => {\n\n            if (entity.has(components) === true) {\n\n                chosen[name] = entity;\n            }\n        });\n\n        handler.call(context, chosen);\n    }\n\n    this.entities = {};\n\n    this.add = add;\n    this.get = get;\n    this.remove = remove;\n    this.system = system;\n}\n\nexport {\n\n    // exports current module as an object\n    World,\n\n    // exports helpers for current module\n    Entity\n};\n","function Camera(camera, opacity = 1) {\n\n    this.name = 'camera';\n\n    this.camera = camera;\n    this.opacity = opacity;\n}\n\nexport {Camera};\n","function Images(parts) {\n\n    this.name = 'images';\n\n    this.parts = parts;\n\n    this.parts.forEach((image) => {\n\n        const {destination, frame, framerate, frames, opacity, source} = image;\n\n        image.source = source;\n\n        image.frames = frames || [[0, 0, 32, 32]];\n        image.frame = frame || 0;\n        image.framerate = framerate || 8;\n        image.destination = destination || [0, 0, 0, 32, 32];\n        image.opacity = opacity || 1;\n\n        image.elapsed = 0;\n    });\n}\n\nexport {Images};\n","function Position(x, y, z = 0) {\n\n    this.name = 'position';\n\n    this.x = x;\n    this.y = y;\n    this.z = z;\n}\n\nexport {Position};\n","function Awareness(states) {\n\n    this.name = 'awareness';\n\n    this.states = states;\n}\n\nexport {Awareness};\n","import {Entity} from 'modules/world.js';\n\nimport {dust} from 'entities/demo/dust.js';\n\nimport {Camera} from 'components/common/camera.js';\nimport {Images} from 'components/common/images.js';\nimport {Position} from 'components/common/position.js';\n\nimport {Awareness} from 'components/demo/awareness.js';\n\nfunction tree(x, y) {\n\n    const entity = new Entity('tree-' + x + '-' + y, [\n\n        new Camera(this.camera),\n        new Images([\n\n            {\n                'source': this.assets.images.demo.tree(),\n                'frames': [\n\n                    [0, 0, 32, 32]\n                ],\n                'frame': 0,\n                'destination': [0, 0, 0, (32 * 2), (32 * 2)]\n            }\n        ]),\n        new Position(\n\n            x * (32 * 2),\n            y * (32 * 2),\n            0\n        ),\n        new Awareness({\n\n            'fire': {\n\n                'duration': 4000,\n                'elapsed': 0,\n                'callback': (entity) => {\n\n                    const x = entity.get('position').x / (32 * 2);\n                    const y = entity.get('position').y / (32 * 2);\n\n                    const a = dust.call(this, x, y);\n\n                    this.world.add(a);\n                    this.grid[x + 10 * y] = a;\n\n                    this.world.remove(entity);\n                }\n            }\n        })\n    ]);\n\n    return entity;\n}\n\nexport {tree};\n","import {Entity} from 'modules/world.js';\n\nimport {dust} from 'entities/demo/dust.js';\nimport {tree} from 'entities/demo/tree.js';\n\nimport {Camera} from 'components/common/camera.js';\nimport {Images} from 'components/common/images.js';\nimport {Position} from 'components/common/position.js';\n\nimport {Awareness} from 'components/demo/awareness.js';\n\nfunction grass(x, y) {\n\n    const entity = new Entity('grass-' + x + '-' + y, [\n\n        new Camera(this.camera),\n        new Images([\n\n            {\n                'source': this.assets.images.demo.grass(),\n                'frames': [\n\n                    [0, 0, 32, 32]\n                ],\n                'frame': 0,\n                'destination': [0, 0, 0, (32 * 2), (32 * 2)]\n            }\n        ]),\n        new Position(\n\n            x * (32 * 2),\n            y * (32 * 2),\n            0\n        ),\n        new Awareness({\n\n            'fire': {\n\n                'duration': 2000,\n                'elapsed': 0,\n                'callback': (entity) => {\n\n                    const x = entity.get('position').x / (32 * 2);\n                    const y = entity.get('position').y / (32 * 2);\n\n                    const a = dust.call(this, x, y);\n\n                    this.world.add(a);\n                    this.grid[x + 10 * y] = a;\n\n                    this.world.remove(entity);\n                }\n            },\n            'water': {\n\n                'duration': 10000,\n                'elapsed': 0,\n                'callback': (entity) => {\n\n                    const x = entity.get('position').x / (32 * 2);\n                    const y = entity.get('position').y / (32 * 2);\n\n                    const a = tree.call(this, x, y);\n\n                    this.world.add(a);\n                    this.grid[x + 10 * y] = a;\n\n                    this.world.remove(entity);\n                }\n            }\n        })\n    ]);\n\n    return entity;\n}\n\nexport {grass};\n","function Generate(states) {\n\n    this.name = 'generate';\n\n    this.states = states;\n}\n\nexport {Generate};\n","import {Entity} from 'modules/world.js';\n\nimport {lake} from 'entities/demo/lake.js';\n\nimport {Camera} from 'components/common/camera.js';\nimport {Images} from 'components/common/images.js';\nimport {Position} from 'components/common/position.js';\n\nimport {Awareness} from 'components/demo/awareness.js';\nimport {Generate} from 'components/demo/generate.js';\n\nfunction snow(x, y) {\n\n    const entity = new Entity('snow-' + x + '-' + y, [\n\n        new Camera(this.camera),\n        new Images([\n\n            {\n                'source': this.assets.images.demo.snow(),\n                'frames': [\n\n                    [0, 0, 32, 32]\n                ],\n                'frame': 0,\n                'destination': [0, 0, 0, (32 * 2), (32 * 2)]\n            }\n        ]),\n        new Position(\n\n            x * (32 * 2),\n            y * (32 * 2),\n            0\n        ),\n        new Awareness({\n\n            'fire': {\n\n                'duration': 1000,\n                'elapsed': 0,\n                'callback': (entity) => {\n\n                    const x = entity.get('position').x / (32 * 2);\n                    const y = entity.get('position').y / (32 * 2);\n\n                    const a = lake.call(this, x, y);\n\n                    this.world.add(a);\n                    this.grid[x + 10 * y] = a;\n\n                    this.world.remove(entity);\n                }\n            }\n        }),\n        new Generate(['ice'])\n    ]);\n\n    return entity;\n}\n\nexport {snow};\n","import {Entity} from 'modules/world.js';\n\nimport {grass} from 'entities/demo/grass.js';\nimport {snow} from 'entities/demo/snow.js';\n\nimport {Camera} from 'components/common/camera.js';\nimport {Images} from 'components/common/images.js';\nimport {Position} from 'components/common/position.js';\n\nimport {Awareness} from 'components/demo/awareness.js';\nimport {Generate} from 'components/demo/generate.js';\n\nfunction lake(x, y) {\n\n    const entity = new Entity('lake-' + x + '-' + y, [\n\n        new Camera(this.camera),\n        new Images([\n\n            {\n                'source': this.assets.images.demo.lake(),\n                'frames': [\n\n                    [0, 0, 32, 32]\n                ],\n                'frame': 0,\n                'destination': [0, 0, 0, (32 * 2), (32 * 2)]\n            }\n        ]),\n        new Position(\n\n            x * (32 * 2),\n            y * (32 * 2),\n            0\n        ),\n        new Awareness({\n\n            'fire': {\n\n                'duration': 4000,\n                'elapsed': 0,\n                'callback': (entity) => {\n\n                    const x = entity.get('position').x / (32 * 2);\n                    const y = entity.get('position').y / (32 * 2);\n\n                    const a = grass.call(this, x, y);\n\n                    this.world.add(a);\n                    this.grid[x + 10 * y] = a;\n\n                    this.world.remove(entity);\n                }\n            },\n            'ice': {\n\n                'duration': 10000,\n                'elapsed': 0,\n                'callback': (entity) => {\n\n                    const x = entity.get('position').x / (32 * 2);\n                    const y = entity.get('position').y / (32 * 2);\n\n                    const a = snow.call(this, x, y);\n\n                    this.world.add(a);\n                    this.grid[x + 10 * y] = a;\n\n                    this.world.remove(entity);\n                }\n            }\n        }),\n        new Generate(['water'])\n    ]);\n\n    return entity;\n}\n\nexport {lake};\n","import {Entity} from 'modules/world.js';\n\nimport {Camera} from 'components/common/camera.js';\nimport {Images} from 'components/common/images.js';\nimport {Position} from 'components/common/position.js';\n\nfunction stone(x, y) {\n\n    const entity = new Entity('stone-' + x + '-' + y, [\n\n        new Camera(this.camera),\n        new Images([\n\n            {\n                'source': this.assets.images.demo.stone(),\n                'frames': [\n\n                    [0, 0, 32, 32]\n                ],\n                'frame': 0,\n                'destination': [0, 0, 0, (32 * 2), (32 * 2)]\n            }\n        ]),\n        new Position(\n\n            x * (32 * 2),\n            y * (32 * 2),\n            0\n        )\n    ]);\n\n    return entity;\n}\n\nexport {stone};\n","import {Entity} from 'modules/world.js';\n\nimport {stone} from 'entities/demo/stone.js';\n\nimport {Camera} from 'components/common/camera.js';\nimport {Images} from 'components/common/images.js';\nimport {Position} from 'components/common/position.js';\n\nimport {Awareness} from 'components/demo/awareness.js';\nimport {Generate} from 'components/demo/generate.js';\n\nfunction lava(x, y) {\n\n    const entity = new Entity('lava-' + x + '-' + y, [\n\n        new Camera(this.camera),\n        new Images([\n\n            {\n                'source': this.assets.images.demo.lava(),\n                'frames': [\n\n                    [0, 0, 32, 32]\n                ],\n                'frame': 0,\n                'destination': [0, 0, 0, (32 * 2), (32 * 2)]\n            }\n        ]),\n        new Position(\n\n            x * (32 * 2),\n            y * (32 * 2),\n            0\n        ),\n        new Awareness({\n\n            'water': {\n\n                'duration': 3000,\n                'elapsed': 0,\n                'callback': (entity) => {\n\n                    const x = entity.get('position').x / (32 * 2);\n                    const y = entity.get('position').y / (32 * 2);\n\n                    const a = stone.call(this, x, y);\n\n                    this.world.add(a);\n                    this.grid[x + 10 * y] = a;\n\n                    this.world.remove(entity);\n                }\n            },\n            'ice': {\n\n                'duration': 2000,\n                'elapsed': 0,\n                'callback': (entity) => {\n\n                    const x = entity.get('position').x / (32 * 2);\n                    const y = entity.get('position').y / (32 * 2);\n\n                    const a = stone.call(this, x, y);\n\n                    this.world.add(a);\n                    this.grid[x + 10 * y] = a;\n\n                    this.world.remove(entity);\n                }\n            }\n        }),\n        new Generate(['fire'])\n    ]);\n\n    return entity;\n}\n\nexport {lava};\n","import {Entity} from 'modules/world.js';\n\nimport {lake} from 'entities/demo/lake.js';\nimport {lava} from 'entities/demo/lava.js';\n\nimport {Camera} from 'components/common/camera.js';\nimport {Images} from 'components/common/images.js';\nimport {Position} from 'components/common/position.js';\n\nimport {Awareness} from 'components/demo/awareness.js';\n\nfunction dust(x, y) {\n\n    const entity = new Entity('dust-' + x + '-' + y, [\n\n        new Camera(this.camera),\n        new Images([\n\n            {\n                'source': this.assets.images.demo.dust(),\n                'frames': [\n\n                    [0, 0, 32, 32]\n                ],\n                'frame': 0,\n                'destination': [0, 0, 0, (32 * 2), (32 * 2)]\n            }\n        ]),\n        new Position(\n\n            x * (32 * 2),\n            y * (32 * 2),\n            0\n        ),\n        new Awareness({\n\n            'fire': {\n\n                'duration': 4000,\n                'elapsed': 0,\n                'callback': (entity) => {\n\n                    const x = entity.get('position').x / (32 * 2);\n                    const y = entity.get('position').y / (32 * 2);\n\n                    const a = lava.call(this, x, y);\n\n                    this.world.add(a);\n                    this.grid[x + 10 * y] = a;\n\n                    this.world.remove(entity);\n                }\n            },\n            'water': {\n\n                'duration': 6000,\n                'elapsed': 0,\n                'callback': (entity) => {\n\n                    const x = entity.get('position').x / (32 * 2);\n                    const y = entity.get('position').y / (32 * 2);\n\n                    const a = lake.call(this, x, y);\n\n                    this.world.add(a);\n                    this.grid[x + 10 * y] = a;\n\n                    this.world.remove(entity);\n                }\n            }\n        })\n    ]);\n\n    return entity;\n}\n\nexport {dust};\n","import {random} from 'modules/random.js';\nimport {World} from 'modules/world.js';\n\nimport {dust} from 'entities/demo/dust.js';\nimport {grass} from 'entities/demo/grass.js';\nimport {lake} from 'entities/demo/lake.js';\nimport {lava} from 'entities/demo/lava.js';\nimport {snow} from 'entities/demo/snow.js';\nimport {stone} from 'entities/demo/stone.js';\nimport {tree} from 'entities/demo/tree.js';\n\nfunction start() {\n\n    console.log('start demo scene');\n\n    this.world = new World(this);\n    this.grid = new Array(10 * 9);\n\n    const entities = [\n\n        dust,\n        dust,\n        dust,\n\n        grass,\n        grass,\n        grass,\n\n        lake,\n        lake,\n\n        lava,\n\n        snow,\n\n        stone,\n\n        tree\n    ];\n\n    for (let line = 0; line < 9; line += 1) {\n\n        for (let column = 0; column < 10; column += 1) {\n\n            const entity = random(entities).call(this, column, line);\n\n            this.world.add(entity);\n            this.grid[column + 10 * line] = entity;\n        }\n    }\n}\n\nexport {start};\n","function easeIn(power) {\n\n    // accelerating from zero velocity\n    return (x) => x ** power;\n}\n\nfunction easeInOut(power) {\n\n    // acceleration until halfway, then deceleration (with x in [0, 1] range)\n    return (x) => {\n\n        if (x < 0.5) {\n\n            return easeIn(power)(2 * x) / 2\n        }\n\n        return 1 - easeInOut(power)(1 - x)\n    }\n}\n\nfunction easeOut(power) {\n\n    // decelerating to zero velocity (with x in [0, 1] range)\n    return (x) => 1 - easeIn(power)(1 - x);\n}\n\nfunction linear(factor) {\n\n    // linear progression\n    return (x) => x * factor;\n}\n\nfunction easeInQuad(x) {\n\n    // accelerating from zero velocity\n    return easeIn(2)(x);\n}\n\nfunction easeInCubic(x) {\n\n    // accelerating from zero velocity\n    return easeIn(3)(x);\n}\n\nfunction easeInQuart(x) {\n\n    // accelerating from zero velocity\n    return easeIn(4)(x);\n}\n\nfunction easeInOutQuad(x) {\n\n    // acceleration until halfway, then deceleration (with x in [0, 1] range)\n    return easeInOut(2)(x);\n}\n\nfunction easeInOutCubic(x) {\n\n    // acceleration until halfway, then deceleration (with x in [0, 1] range)\n    return easeInOut(3)(x);\n}\n\nfunction easeInOutQuart(x) {\n\n    // acceleration until halfway, then deceleration (with x in [0, 1] range)\n    return easeInOut(4)(x);\n}\n\nfunction easeOutQuad(x) {\n\n    // decelerating to zero velocity (with x in [0, 1] range)\n    return easeOut(2)(x);\n}\n\nfunction easeOutCubic(x) {\n\n    // decelerating to zero velocity (with x in [0, 1] range)\n    return easeOut(3)(x);\n}\n\nfunction easeOutQuart(x) {\n\n    // decelerating to zero velocity (with x in [0, 1] range)\n    return easeOut(4)(x);\n}\n\nfunction reverse(handler) {\n\n    // reversing easing function\n    return (x) => handler(1 - x);\n}\n\n// exports current module as functions\nexport {\n\n    // export ease function creators\n    easeIn, easeInOut, easeOut, linear,\n\n    // export ease-in functions\n    easeInCubic, easeInQuad, easeInQuart,\n\n    // export ease-in-out functions\n    easeInOutCubic, easeInOutQuad, easeInOutQuart,\n\n    // export ease-out functions\n    easeOutCubic, easeOutQuad, easeOutQuart,\n\n    // export utility functions\n    reverse\n};\n","import {Camera} from 'modules/camera.js';\n\nfunction setup() {\n\n    console.log('setup demo scene');\n\n    this.camera = new Camera(this.context, this.size.width, this.size.height);\n}\n\nexport {setup};\n","import * as Ease from './ease.js';\n\nfunction Camera(context, width, height) {\n\n    let images = [];\n\n    let shaking = {\n\n        'current': false,\n        'duration': 0,\n        'easing': null,\n        'elapsed': 0,\n        'force': {\n\n            'x': 0,\n            'y': 0\n        },\n        'shift': {\n\n            'x': 0,\n            'y': 0\n        }\n    };\n\n    function add(image) {\n\n        let target = 0;\n\n        for (let iterator = images.length - 1; iterator >= 0; iterator -= 1) {\n\n            const current = images[iterator];\n\n            if (image.destination.z >= current.destination.z) {\n\n                target = iterator + 1;\n\n                break;\n            }\n        }\n\n        images.splice(target, 0, image);\n    }\n\n    function idle() {\n\n        shaking = {\n\n            'current': false,\n            'duration': 0,\n            'easing': null,\n            'elapsed': 0,\n            'force': {\n\n                'x': 0,\n                'y': 0\n            },\n            'shift': {\n\n                'x': 0,\n                'y': 0\n            }\n        };\n    }\n\n    function render() {\n\n        images.forEach((image) => {\n\n            const {destination, frame, opacity, source} = image;\n\n            if (opacity > 0\n            && this.visible(destination.x, destination.y, frame.width, frame.height) === true) {\n\n                const alpha = context.globalAlpha;\n\n                context.globalAlpha = opacity;\n\n                context.drawImage(\n\n                    source,\n                    frame.x, frame.y, frame.width, frame.height,\n                    destination.x - (this.position.x + shaking.shift.x), destination.y - (this.position.y + shaking.shift.y), destination.width, destination.height\n                );\n\n                context.globalAlpha = alpha;\n            }\n        });\n\n        images = [];\n    }\n\n    function set(x, y) {\n\n        this.position.x = x;\n        this.position.y = y;\n    }\n\n    function shake(x, y, duration, easing = Ease.reverse(Ease.easeOut(2))) {\n\n        this.idle();\n\n        shaking.force = {\n\n            'x': x,\n            'y': y\n        };\n\n        shaking.current = true;\n        shaking.duration = duration;\n        shaking.easing = easing;\n    }\n\n    function update(delta) {\n\n        if (shaking.current === false) {\n\n            return;\n        }\n\n        if (shaking.elapsed + delta >= shaking.duration) {\n\n            this.idle();\n\n            return;\n        }\n\n        shaking.elapsed += delta;\n\n        const amplitude = shaking.easing(shaking.elapsed / shaking.duration);\n        const angle = Math.random() * 2 * Math.PI;\n\n        shaking.shift.x = Math.round(Math.cos(angle) * shaking.force.x * amplitude);\n        shaking.shift.y = Math.round(Math.sin(angle) * shaking.force.y * amplitude);\n    }\n\n    function visible(x, y, width, height) {\n\n        const camera = {\n\n            'x': this.position.x + shaking.shift.x,\n            'y': this.position.y + shaking.shift.y,\n            'width': this.size.width,\n            'height': this.size.height\n        };\n\n        if (x + width <= camera.x\n        || x >= camera.x + camera.width\n        || y + height <= camera.y\n        || y >= camera.y + camera.height) {\n\n            return false;\n        }\n\n        return true;\n    }\n\n    this.position = {\n\n        'x': 0,\n        'y': 0\n    };\n\n    this.size = {\n\n        'width': width,\n        'height': height\n    };\n\n    this.add = add;\n    this.idle = idle;\n    this.render = render;\n    this.set = set;\n    this.shake = shake;\n    this.update = update;\n    this.visible = visible;\n}\n\n// exports current module as an object\nexport {Camera};\n","function recovery(entities) {\n\n    Object.entries(entities).forEach(([name, entity]) => {\n\n        const x = entity.get('position').x / (32 * 2);\n        const y = entity.get('position').y / (32 * 2);\n\n        const awareness = entity.get('awareness').states;\n\n        Object.keys(awareness).forEach((key) => {\n\n            const data = awareness[key];\n\n            if (data.modified && data.modified > 0) {\n\n                data.elapsed += this.delta.update * (1 + (2 * (data.modified - 1) / 10));\n\n                delete data.modified;\n            }\n\n            if (data.elapsed >= data.duration) {\n\n                data.callback(entity);\n            }\n        });\n    });\n}\n\nexport {recovery};\n","function state(entities) {\n\n    Object.entries(entities).forEach(([name, entity]) => {\n\n        const x = entity.get('position').x / (32 * 2);\n        const y = entity.get('position').y / (32 * 2);\n\n        const top = this.grid[(x) + 10 * (y - 1)];\n        const topright = this.grid[(x + 1) + 10 * (y - 1)];\n        const right = this.grid[(x + 1) + 10 * (y)];\n        const rightbottom = this.grid[(x + 1) + 10 * (y + 1)];\n        const bottom = this.grid[(x) + 10 * (y + 1)];\n        const bottomleft = this.grid[(x - 1) + 10 * (y + 1)];\n        const left = this.grid[(x - 1) + 10 * (y)];\n        const lefttop = this.grid[(x - 1) + 10 * (y - 1)];\n\n        const neighbors = [];\n\n        if (y > 0) neighbors.push(top)\n        if (y > 0 && (x + 1) % 10 !== 0) neighbors.push(topright)\n        if ((x + 1) % 10 !== 0) neighbors.push(right)\n        if (y < 9 && (x + 1) % 10 !== 0) neighbors.push(rightbottom)\n        if (y < 9) neighbors.push(bottom)\n        if (y < 9 && x % 10 !== 0) neighbors.push(bottomleft)\n        if (x % 10 !== 0) neighbors.push(left)\n        if (y > 0 && x % 10 !== 0) neighbors.push(lefttop)\n\n        const awareness = entity.get('awareness').states;\n\n        Object.keys(awareness).forEach((key) => {\n\n            const state = key;\n            const data = awareness[key];\n\n            neighbors.forEach((neighbor) => {\n\n                if (typeof neighbor !== 'undefined'\n                && neighbor.has('generate') === true\n                && neighbor.get('generate').states.indexOf(state) !== -1) {\n\n                    data.modified = data.modified ? data.modified += 1 : 1;\n                }\n            });\n        });\n    });\n}\n\nexport {state};\n","import {recovery} from 'systems/demo/recovery.js';\nimport {state} from 'systems/demo/state.js';\n\nfunction update() {\n\n    // console.log('update demo scene');\n\n    this.camera.update(this.delta.update);\n\n    this.world.system(['awareness'], state);\n    this.world.system(['awareness'], recovery);\n}\n\nexport {update};\n","function images(entities) {\n\n    Object.entries(entities).forEach(([name, entity]) => {\n\n        const cameraComponent = entity.get('camera');\n        const imagesComponent = entity.get('images');\n        const positionComponent = entity.get('position');\n\n        imagesComponent.parts.forEach((image) => {\n\n            const {destination, frame, framerate, frames, opacity, source} = image;\n\n            if (frames.length > 1) {\n\n                image.elapsed += this.delta.render;\n\n                const duration = 1000 / framerate;\n\n                while (image.elapsed >= duration) {\n\n                    image.elapsed -= duration;\n                    image.frame = (frame === frames.length - 1) ? 0 : frame + 1;\n                }\n            }\n\n            cameraComponent.camera.add({\n\n                'source': source,\n                'frame': {\n\n                    'x': frames[image.frame][2] * frames[image.frame][0],\n                    'y': frames[image.frame][3] * frames[image.frame][1],\n                    'width': frames[image.frame][2],\n                    'height': frames[image.frame][3]\n                },\n                'destination': {\n\n                    'x': positionComponent.x + destination[0],\n                    'y': positionComponent.y + destination[1],\n                    'z': positionComponent.z + destination[2],\n                    'width': destination[3],\n                    'height': destination[4]\n                },\n                'opacity': cameraComponent.opacity * opacity\n            });\n        });\n    });\n}\n\nexport {images};\n","import {images} from 'systems/common/images.js';\n\nfunction render() {\n\n    // console.log('render demo scene');\n\n    this.context.fillStyle = '#d7dae0';\n    this.context.fillRect(0, 0, this.size.width, this.size.height);\n\n    this.world.system(['images', 'position'], images);\n\n    this.camera.render();\n}\n\nexport {render};\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAA3ElEQVRYhe1WQRKDIAzcOp74Aw/g2GM/5Jd9gH/w2p5kSiSWSAh2xj05o7IbyG54TK/nGx0x9CS/BQDAyL0I3sXneVntBHwTW2AnQKParYiStdgjkJJRlBZSLWAjklStKoAKkeK6NgT251vboDlrH+4AJayxKPfvzx7QCiFune49cAtQywHg3ABrFsXBO5tZUBvFsQdqx/C8rKcsOwTvIrn1XQAAxpa3nRL8hw21h5JYAO30EuS+zQkX2VBSeak9VZPwSAiHREDLs+aQuICGiUUuZHfAMhsSAT1C6QOyXl0Fu9DzGAAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAvElEQVRYhdWWwQ2AIAxFlTXcwSk4uZxHl3EKd3AOPWlM1PYX2gL/ZtLER/9voZ+X6egKKjw/1m0vCxDHwR0i8CU6+jvYC0DSBUldHAcM4IJAhNZRIi3QygMFSgJonJCTWwjdAVD7sgCon6D2tWGB5XaEACxXdJYF5otIQ1znYACrpWTeAS4/LmMovgs8HyVtLCJEqV2rswMe7wASIEWp0HVawEkSOHgVW80+Z80NILlyNUNaVwY8x+8ToIROUco7r9vWWcgAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAn0lEQVRYhe2WwQ2AIAxFv8aDU7iBUzmWY7EBU3DDkwQVWm2KXNobAfpfQ/kwbHuM6BhjT3EDMAAAmLgFwfnLeF6X9gC56F3wnNMCKQJQySXCFDR7BBpBQXdvQgMwAAP47AOUSzYBkL4Fb/exANIqS29IKddvPVArpHsTGoABpGsoMRgNU0oAkgT5nto950LtCDjx4PzDHYGf/oSAGVE9DhPHLOg8NmucAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABf0lEQVRYhcVXO46DMBB9IKqImiNE6WkjUaXgImyd4ywXoeYAnCE9NUrLFmisidfjD4b4SUi2mZk32PPB2et5XRGJaSxRNwsAoBsq9O3s1CG5nCb06Ib5mB5JhhuX3vN5N1TIXs/rSgq65ybjANTX6jK0LumZ9AsaEDnfTgkSgYuYy9XNgmkstx0INXAkilTEwHYUeRJmhqQOTGO5OWAKurpZ8Pu+eBkiWVfwmvRyPpGEfOBTfEx2lQOmQAwxaipSLnkAyB63+9q3c5JM+EoW1M0ixlg3VN/JAr3HcKhmFBrBITDFEh158e/NwbDFlmrHexGzayoN+3aGlAU+BWZPAeJwFiIX9qawqgOudkx9+yxYK6Ft/VAHUlVB5cDZRLZGl7uEYskBeyU8tRDR0f5c3m4HYn+vQ+KI60XFgOkyE4qPIwiNA9pan6+XdjXT74bSLcmXyOWAjoKTxhjWnZPWda7scbtbb8f8ymYy7LonSsQEaxpK5HzMDVNM+JL37Yw/hH7drl0juI4AAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABDElEQVRYhb1X0RXCMAikqaN0hO6/gNnAjmKffuGLEUI4qPdrgMuFg7rcH88Xgdi3lepxouFERFQixTNiC5oMvXlfq2g/XElCJJCRrIV2oXqcX7WKVpwTeJXZt9XVnGoT1uNUE41I8flZ4otlwxGJ1B7QMCqCNK7qAk9yvr1XASnnUAEpIEt6xs0bECkuxYoKtBJHRu4MTBfMgEki6sDLqEXkWVIIRBrTtQ15zPawZsUo/2cXWCRQ71vnpxXI3paMFBdEkNKElxDIWDQQAe8HRQtkcoaeQCs24ygG1ISR0durCykQtWSrgHsdR9GTh3sgazD9ZQ6Yu0A6nPEhMmPpHwKj/wNXQHyCzOJWrjceApPzijaCtwAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABkElEQVRYhcWVq27DQBBFb61EMo9UYsncxNDBkUzcnyvsp5REMo5hSFFIpPxAUCWDFlRe7WNmdtZu4su8j7nHM7O7L+8fbz9YUdma5gCw0Swa+jwYaw7fjwegjGNzqWAkgGQck71XA+P0wNDni8wlGBXAIxSDeMopkCBWP4ZPA+Cy8O8Ap+GK03BVrxcBNIFswxRjFYAflDLYN2UwN43Z4u4EVQliaaUMfXE9oHoLNEYaCBGAIpwblNPQ50EpnBLEmsifT+14SkkloCCWKgPc9EtdT5VkaZlMBiazfVPO7ng7BjcHlE4fJN0DWlG9wmkDAPfdBcDWDPqXi6YUKaa2xAxw6Z5rRsn0QNWN+PrcBgu4noiZ2vB+YzeHV/OdAUBbFwbCf1xi6U89BVU3Ot/BPcBlYompJNMDbV2YTEhGS+rt/70DQC3kzCSIqhsdo2ntNOb/ZFCCti5wPN9w311QdbSJXSIO5u9ow4nhm5MANgS18Xi+oepG3BEacLGmfZTEx4gilgJS62NzLIAUTDOv1S8tGsrUuhRuKQAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABhUlEQVRYhcWXr27DMBDG3WlsICoYmCJNQWXLG5QFVX2Dqs80uAeI8gaBZXmDwqCRooBoZNJQh2xdLr4/XuzsY1Fd3++++O6czfvH4W4I1c1ozqct9XMUPcCHy/WWNJgIUJX5DKJuxvUAUopydwZgXYCZUy7Uzahy6HK9marMdQAWQqsiG9Rr1QAa2cw/v57FtVxCLECRDS5DbDUszyUHVXRAk+ESCC8AtJd6x1JAbU8JciAkS+1B3nCtuGt7B0C98yIbJpChrftRWlBkg/l5fTLGpJkJqjKELTp2a2YB9sed2R93QRuGAiafBbAafHBqgKrM3Qa2NPEB5AJRUgPATWFQaRbgEY/hVABSRrb0qBIMngW4i51P28nm+LlrexGCSiLoEOLA3DouOHyOVgVU78ddE+tPAF3bm67tg//nmyuLb0ScfNd67AI7jGIJ9g/cN5J3QhscOgFdEKehT9wtF+vl7dtUZe7OjA1ugZwDqb6KJNDJGQjJLJZW+zJSAayd/QzgP/QLW923dXWB0tEAAAAASUVORK5CYII=\"","const datasets = [];\n\nexport {datasets};\n","const images = [\n\n    {\n        'name': 'dust',\n        'scope': 'demo',\n        'source': require('./demo/dust-32x32.png'),\n        'type': 'image'\n    },\n    {\n        'name': 'grass',\n        'scope': 'demo',\n        'source': require('./demo/grass-32x32.png'),\n        'type': 'image'\n    },\n    {\n        'name': 'lake',\n        'scope': 'demo',\n        'source': require('./demo/lake-32x32.png'),\n        'type': 'image'\n    },\n    {\n        'name': 'lava',\n        'scope': 'demo',\n        'source': require('./demo/lava-32x32.png'),\n        'type': 'image'\n    },\n    {\n        'name': 'snow',\n        'scope': 'demo',\n        'source': require('./demo/snow-32x32.png'),\n        'type': 'image'\n    },\n    {\n        'name': 'stone',\n        'scope': 'demo',\n        'source': require('./demo/stone-32x32.png'),\n        'type': 'image'\n    },\n    {\n        'name': 'tree',\n        'scope': 'demo',\n        'source': require('./demo/tree-32x32.png'),\n        'type': 'image'\n    }\n];\n\nexport {images};\n","import {datasets} from './datasets/index.js';\nimport {images} from './images/index.js';\nimport {sounds} from './sounds/index.js';\n\nconst assets = [\n\n    ...datasets,\n    ...images,\n    ...sounds\n];\n\nexport {assets};\n","import {assets} from 'assets/index.js';\nimport * as scenes from 'scenes/index.js';\n\nimport {Theatre} from 'core/theatre.js';\n\nnew Theatre({\n\n    'assets': assets,\n    'container': document.body,\n    'expose': true,\n    'scenes': scenes,\n    'sharp': true,\n    'size': {\n\n        'width': 640,\n        'height': 576\n    }\n});\n","import {Canvas} from 'core/canvas.js';\nimport {Loop} from 'core/loop.js';\n\nimport {preload} from 'core/preload.js';\n\nfunction Theatre(config) {\n\n    const {assets, container, scenes, size} = config;\n\n    const expose = config.expose || false;\n    const framerate = config.framerate || 60;\n    const sharp = config.sharp || false;\n    const speed = config.speed || 1;\n\n    let loading = null;\n    let restarting = false;\n\n    function initialize() {\n\n        const canvas = new Canvas('2d', 'theatre', this.size.width, this.size.height);\n\n        if (sharp === true) {\n\n            canvas.sharp();\n        }\n\n        container.appendChild(canvas.element);\n\n        this.container = container;\n        this.context = canvas.context;\n        this.element = canvas.element;\n\n        this.assets = {};\n        this.delta = {};\n        this.delta.render = 0;\n        this.delta.update = 0;\n\n        this.scene = this.scenes.loading;\n        this.scene.setup.call(this);\n        this.scene.start.call(this);\n\n        const loop = new Loop(framerate, speed);\n\n        loop.update((timeframe) => {\n\n            this.delta.update = timeframe;\n            this.scene.update.call(this);\n\n            if (restarting === true) {\n\n                this.scene.start.call(this);\n\n                restarting = false;\n\n                return;\n            }\n\n            if (loading !== null) {\n\n                this.scene.destroy.call(this);\n                this.scene = this.scenes[loading];\n                this.scene.setup.call(this);\n                this.scene.start.call(this);\n\n                loading = null;\n\n                return;\n            }\n        });\n\n        loop.render((timeframe) => {\n\n            this.delta.render = timeframe;\n            this.scene.render.call(this);\n        });\n\n        preload(assets, (assets) => {\n\n            assets.forEach((asset) => {\n\n                if (typeof this.assets[asset.type + 's'] === 'undefined') {\n\n                    this.assets[asset.type + 's'] = {};\n                }\n\n                if (typeof this.assets[asset.type + 's'][asset.scope] === 'undefined') {\n\n                    this.assets[asset.type + 's'][asset.scope] = {};\n                }\n\n                this.assets[asset.type + 's'][asset.scope][asset.name] = asset.getter;\n            });\n\n            this.preloading = false;\n        });\n\n        this.loop = loop;\n        this.preloading = true;\n    }\n\n    function load(scene) {\n\n        loading = scene;\n    }\n\n    function restart() {\n\n        restarting = true;\n    }\n\n    this.preloading = false;\n    this.scenes = scenes;\n    this.size = size;\n    this.state = {};\n    this.version = '0.32.0';\n\n    this.load = load;\n    this.restart = restart;\n\n    initialize.call(this, config);\n\n    if (expose === true) {\n\n        window.theatre = this;\n    }\n}\n\n// exports current module as an object\nexport {Theatre};\n","function Canvas(type, identifier, width, height) {\n\n    const element = document.createElement('canvas');\n    const context = element.getContext(type);\n    const ratio = window.devicePixelRatio || 1;\n\n    function sharp() {\n\n        this.element.style.imageRendering = '-moz-crisp-edges';\n        this.element.style.imageRendering = '-webkit-crisp-edges';\n        this.element.style.imageRendering = 'crisp-edges';\n        this.element.style.imageRendering = 'pixelated';\n        this.context.imageSmoothingEnabled = false;\n    }\n\n    element.setAttribute('id', identifier);\n    element.setAttribute('height', ratio * height);\n    element.setAttribute('width', ratio * width);\n\n    element.style.height = height + 'px';\n    element.style.width = width + 'px';\n\n    context.scale(ratio, ratio);\n\n    this.context = context;\n    this.element = element;\n    this.sharp = sharp;\n}\n\n// exports current module as an object\nexport {Canvas};\n","function Loop(framerate = 60, speed = 1) {\n\n    let elapsedTime = 0;\n    let lastRender = null;\n    let lastUpdate = null;\n\n    function render(handler) {\n\n        const currentRender = Date.now();\n\n        if (lastRender !== null) {\n\n            handler(currentRender - lastRender);\n        }\n\n        // call user's render handler on each available frame\n        requestAnimationFrame(this.render.bind(this, handler));\n\n        lastRender = currentRender;\n    }\n\n    function update(handler) {\n\n        const currentUpdate = Date.now();\n\n        if (lastUpdate !== null) {\n\n            // define elapsed time since last update\n            elapsedTime += currentUpdate - lastUpdate;\n        }\n\n        // call user's update handler matching timeframe, speed and fixing browser time handling\n        while (elapsedTime >= 1000 / this.framerate / this.speed) {\n\n            // define elapsed time since last user's update handler matching timeframe and speed\n            elapsedTime -= 1000 / this.framerate / this.speed;\n\n            handler(1000 / this.framerate);\n        }\n\n        lastUpdate = currentUpdate;\n\n        // call update loop at least 60 times per second to quickly catch framerate or speed changes\n        setTimeout(this.update.bind(this, handler), 1000 / Math.max(this.framerate, 60));\n    }\n\n    this.framerate = framerate;\n    this.speed = speed;\n\n    this.render = render;\n    this.update = update;\n}\n\n// exports current module as an object\nexport {Loop};\n","function preload(assets, handler) {\n\n    let promises = [];\n\n    // preloads each asset\n    assets.forEach(function (asset) {\n\n        // creates a promise for current asset preloading\n        const promise = new Promise(function (resolve, reject) {\n\n            // if current asset is a dataset then preload it\n            if (asset.type === 'dataset') {\n\n                asset.getter = () => asset.source;\n\n                resolve(asset);\n            }\n\n            // if current asset is an image then preload it\n            if (asset.type === 'image') {\n\n                const image = new Image();\n\n                image.src = asset.source;\n\n                // when current image is loaded then resolve current promise\n                image.onload = function () {\n\n                    asset.getter = () => image;\n\n                    resolve(asset);\n                };\n            }\n\n            // if current asset is a sound then preload it\n            else if (asset.type === 'sound') {\n\n                const sound = new Audio(asset.source);\n\n                // when current sound is loaded then resolve current promise\n                sound.oncanplaythrough = function () {\n\n                    asset.getter = () => sound.cloneNode();\n\n                    resolve(asset);\n                };\n            }\n        });\n\n        promises.push(promise);\n    });\n\n    // call user's success handler when all assets are preloaded\n    Promise.all(promises).then(handler);\n}\n\n// exports current module as a function\nexport {preload};\n"],"sourceRoot":""}